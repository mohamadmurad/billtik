import{J as S,x as C,j as e,Q as A,S as c}from"./app-BLZFXyKH.js";import{t as s,B as i}from"./useTranslation-DHlm1SLp.js";import{A as D}from"./app-layout-DIff3Bb8.js";import{M as E}from"./MSelect-DljD5MBF.js";import{I as g}from"./input-C0LnvjHX.js";import{L}from"./loader-circle-zSSyPNjN.js";import"./index-ylu4HxYp.js";import"./index-CKtzOh09.js";import"./index-DDUeDfIN.js";import"./index-B30nyNOK.js";import"./x-BX2yKWxq.js";import"./app-logo-icon-CDj5oFHt.js";import"./label-BFHDIXkk.js";import"./select-DEpYvQ_X.js";import"./index-DPg7GP5P.js";import"./chevron-down-DlI5EWmI.js";function T(){var o,x,p,h,u,b,j;const r="company.hotspot.clients",{model:t}=S().props,_=[{title:s("attributes.dashboard"),href:route("company.dashboard")},{title:s(`attributes.${r}.title`),href:route(r+".index")},{title:t.name,href:"#"}],{data:d,setData:n,post:v,processing:m,reset:k,errors:l}=C({profile_id:"",start_date:"",end_date:""}),z=a=>{a.preventDefault(),v(route(r+".subscriptions.store",t.id),{onSuccess:()=>k()})},y=()=>c.post(route("company.hotspot.clients.enable",t.id)),w=()=>c.post(route("company.hotspot.clients.disable",t.id));return e.jsxs(D,{breadcrumbs:_,children:[e.jsx(A,{title:t.name}),e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.router")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.router.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.name")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.mikrotik_username")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.mikrotik_username})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.mikrotik_password")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.mikrotik_password})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.email")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.phone")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.phone})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.id_number")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.id_number})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.created_at")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:t.created_at})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.profile")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:((x=(o=t.active_subscription)==null?void 0:o.profile)==null?void 0:x.name)??"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.start_date")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:((p=t.active_subscription)==null?void 0:p.start_date)??"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:s("attributes.end_date")}),e.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:((h=t.active_subscription)==null?void 0:h.end_date)??"-"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[((u=t.abilities)==null?void 0:u.can_enable)&&e.jsx(i,{onClick:y,variant:"default",children:"Enable"}),((b=t.abilities)==null?void 0:b.can_disable)&&e.jsx(i,{onClick:w,variant:"destructive",children:"Disable"})]}),e.jsxs("div",{className:"mt-3 overflow-x-auto rounded-2xl bg-white p-4 shadow-sm dark:bg-zinc-900",children:[e.jsx("h5",{className:"mb-2",children:"All Subscriptions"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Profile"}),e.jsx("th",{className:"p-2 text-left",children:"Start"}),e.jsx("th",{className:"p-2 text-left",children:"End"}),e.jsx("th",{className:"p-2 text-left",children:"Status"}),e.jsx("th",{className:"p-2 text-left",children:"Actions"})]})}),e.jsx("tbody",{children:(j=t.subscriptions)==null?void 0:j.map(a=>{var f;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:(f=a.profile)==null?void 0:f.name}),e.jsx("td",{className:"p-2",children:a.start_date}),e.jsx("td",{className:"p-2",children:e.jsxs("form",{onSubmit:N=>{N.preventDefault(),c.post(route("company.subscriptions.update",{id:a.id}),{end_date:N.target.end_date.value},{preserveScroll:!0})},className:"flex items-center gap-2",children:[e.jsx("input",{name:"end_date",defaultValue:a.end_date??"",type:"date",className:"input"}),e.jsx(i,{size:"sm",type:"submit",children:"Save"})]})}),e.jsx("td",{className:"p-2",children:a.status}),e.jsx("td",{className:"p-2"})]},a.id)})})]})]}),e.jsxs("form",{className:"mt-3 rounded-2xl bg-white p-4 shadow-sm dark:bg-zinc-900",onSubmit:z,children:[e.jsx("h5",{className:"mb-4",children:s("attributes.create")}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"grid gap-2",children:e.jsx(E,{label:s("attributes.profile"),value:String(d.profile_id),apiUrl:route("company.hotspot.profiles.search",{is_synced:1}),inputProps:{id:"profile"},onChange:a=>n("profile_id",String(a)),error:l.profile_id,dependencies:{router_id:t.router_id}})}),e.jsx("div",{className:"grid gap-2",children:e.jsx(g,{label:s("attributes.start_date"),id:"start_date",type:"date",value:d.start_date,onChange:a=>n("start_date",a.target.value),error:l.start_date})}),e.jsx("div",{className:"grid gap-2",children:e.jsx(g,{label:s("attributes.end_date"),id:"end_date",type:"date",value:d.end_date,onChange:a=>n("end_date",a.target.value),error:l.end_date})})]}),e.jsxs(i,{type:"submit",className:"mt-4",disabled:m,children:[m&&e.jsx(L,{className:"h-4 w-4 animate-spin"}),s("attributes.save")]})]})]})]})}export{T as default};
