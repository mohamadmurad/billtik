import{J as x,j as e,S as y}from"./app-BByt-vRR.js";import{E as f}from"./EditAction-C3qNY6ge.js";import{S as b}from"./ShowAction-D0pgH1mU.js";import{D as j}from"./DeletePopover-CVGSXQyF.js";import{M as v}from"./m-datatable-BzfPuPBc.js";import{M as g}from"./MSelect-DAMHVxr8.js";import{u as F}from"./useDatatableFilters-BmjNlkhR.js";import{t as r,B as C}from"./useTranslation-bnkdia7D.js";import{R as S}from"./refresh-cw-CZG7eDmk.js";function E({resource:s}){const{items:o}=x().props,{filters:a,setFilters:n,applyFilters:l,resetFilters:c,isFiltersActive:m}=F({search:"",router_id:""},s),d=a;function p(i){if(i)try{y.visit(route(s+".sync",i),{method:"post"})}catch(t){console.error(`Failed to sync ${s}:`,t)}}const u=e.jsx("div",{className:"min-w-[300px] space-y-4",children:e.jsx("div",{className:"grid gap-2",children:e.jsx(g,{label:r("attributes.router"),value:String(d.router_id),apiUrl:route("company.routers.search"),inputProps:{id:"router"},onChange:i=>n({...a,router_id:String(i)})})})});return e.jsx("div",{className:"px-4 py-6",children:e.jsx(v,{items:o,resource:s,columns:[{accessorKey:"router.name",header:r("attributes.router")},{accessorKey:"name",header:r("attributes.name")},{accessorKey:"mikrotik_username",header:r("attributes.username")},{accessorKey:"email",header:r("attributes.email")},{accessorKey:"phone",header:r("attributes.phone")},{accessorKey:"created_at",header:r("attributes.created_at")},{id:"actions",header:r("attributes.actions"),cell:({row:i})=>{const t=i.original;return e.jsxs("div",{className:"flex",children:[t.abilities.need_sync&&e.jsx(C,{title:r("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),p(t.id)},children:e.jsx(S,{size:20,className:"text-green-500"})}),t.abilities.view&&e.jsx(b,{resource:s,rowModel:t}),t.abilities.edit&&e.jsx(f,{rowModel:t,resource:s}),t.abilities.delete&&e.jsx(j,{id:t.id,resource:s})]})}}],filterComponents:u,filtersActive:m,onFilterApply:l,onFilterReset:c})})}export{E as C};
