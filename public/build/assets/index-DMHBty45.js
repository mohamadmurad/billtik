import{J as b,j as e,Q as x,S as f}from"./app-CKP0fCad.js";import{E as y}from"./EditAction-lIRaSem5.js";import{S as j,D as v}from"./table-BDovoNfT.js";import{M as g}from"./m-datatable-C1SWNBSB.js";import{M as F}from"./MSelect-DZz2Yf2N.js";import{u as A}from"./useDatatableFilters-D8_MkAiz.js";import{t,B as S}from"./useTranslation-B1WnH85P.js";import{A as _}from"./app-layout-BpALnAhw.js";import{R as K}from"./refresh-cw-DSt3WsYr.js";import"./index-Pypb9-U_.js";import"./index--gZpnN_G.js";import"./index-CFY7JARr.js";import"./index-BGH1-Xth.js";import"./input-CoiDNOd_.js";import"./label-Dpait9sO.js";import"./chevron-down-DPUmf5jv.js";import"./select-CV2lt1eG.js";import"./index-CRj88-BP.js";import"./app-logo-icon-D2cv5nBr.js";function H(){const{items:a}=b().props,r="company.hotspot.clients",{filters:o,setFilters:n,applyFilters:c,resetFilters:l,isFiltersActive:m}=A({search:"",router_id:""},r),p=e.jsx("div",{className:"min-w-[300px] space-y-4",children:e.jsx("div",{className:"grid gap-2",children:e.jsx(F,{label:t("attributes.router"),value:String(o.router_id),apiUrl:route("company.routers.search"),id:"router",onChange:i=>n({...o,router_id:String(i)})})})}),d=[{title:t("attributes.dashboard"),href:route("company.dashboard")},{title:t(`attributes.${r}.title`),href:route(r+".index")}];function u(i){if(i)try{f.visit(route(r+".sync",i),{method:"post",onFinish:()=>{}})}catch(s){console.error(`Failed to sync ${r}:`,s)}}return e.jsxs(_,{breadcrumbs:d,children:[e.jsx(x,{title:t(`attributes.${r}.title`)}),e.jsx("div",{className:"px-4 py-6",children:e.jsx(g,{items:a,resource:r,columns:[{accessorKey:"router.name",header:t("attributes.router")},{accessorKey:"name",header:t("attributes.name")},{accessorKey:"mikrotik_username",header:t("attributes.username")},{accessorKey:"email",header:t("attributes.email")},{accessorKey:"phone",header:t("attributes.phone")},{accessorKey:"created_at",header:t("attributes.created_at")},{id:"actions",header:t("attributes.actions"),cell:({row:i})=>{const s=i.original;return e.jsxs("div",{className:"flex",children:[s.abilities.need_sync&&e.jsx(S,{title:t("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),u(s.id)},children:e.jsx(K,{size:20,className:"text-green-500"})}),s.abilities.view&&e.jsx(j,{resource:r,rowModel:s}),s.abilities.edit&&e.jsx(y,{rowModel:s,resource:r}),s.abilities.delete&&e.jsx(v,{id:s.id,resource:r})]})}}],filterComponents:p,filtersActive:m,onFilterApply:c,onFilterReset:l})})]})}export{H as default};
