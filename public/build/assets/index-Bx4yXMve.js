import{J as f,a as b,j as t,Q as x,S as c}from"./app-ChXEbpKX.js";import{E as y}from"./EditAction-D91-dY9e.js";import{S as j,D as v}from"./table-DdSVp63P.js";import{M as _}from"./m-datatable-nbSOdemE.js";import{c as g,t as s,B as n}from"./useTranslation-B8UQE0T5.js";import{A as k}from"./app-layout-CcVFurfu.js";import"./index-Dx2VI5wQ.js";import"./index-J5ey_0sn.js";import"./index-DXFEMFX5.js";import"./index-DZ6K7HYg.js";import"./input-Bx2yrC0C.js";import"./label-CJS0vMkX.js";import"./app-logo-icon-t4yVX4ec.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],d=g("RefreshCw",w);function P(){const{items:l}=f().props,e="profiles",[i,o]=b.useState(!1),p=[{title:s("attributes.dashboard"),href:route("dashboard")},{title:s(`attributes.${e}.title`),href:route(e+".index")}];function m(r){if(r)try{o(!0),c.visit(route(e+".sync",r),{method:"post",onFinish:()=>{o(!1)}})}catch(a){console.error(`Failed to sync ${e}:`,a),o(!1)}}function u(){try{o(!0),c.visit(route(e+".sync-all"),{method:"post",onFinish:()=>{o(!1)}})}catch(r){console.error(`Failed to sync ${e}:`,r),o(!1)}}return t.jsxs(k,{breadcrumbs:p,children:[t.jsx(x,{title:s(`attributes.${e}.title`)}),t.jsx("div",{className:"px-4 py-6",children:t.jsx(_,{items:l,createButton:!0,beforeCreateBtnContent:t.jsxs(n,{variant:"default",className:"px-8 py-5 text-[16px] font-extrabold",onClick:r=>{r.stopPropagation(),u()},disabled:i,children:[t.jsx(d,{size:20,className:""}),s("attributes.fetch_from_microtik")]}),resource:e,columns:[{accessorKey:"local_name",header:s("attributes.name")},{accessorKey:"download_formatted",header:s("attributes.download_limit")},{accessorKey:"upload_formatted",header:s("attributes.upload_limit")},{accessorKey:"price_formatted",header:s("attributes.price")},{accessorKey:"created_at",header:s("attributes.created_at")},{id:"actions",header:s("attributes.actions"),cell:({row:r})=>{const a=r.original;return t.jsxs("div",{className:"flex",children:[a.abilities.need_sync&&t.jsx(n,{title:s("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),m(a.id)},disabled:i,children:t.jsx(d,{size:20,className:"text-green-500"})}),a.abilities.view&&t.jsx(j,{resource:e,rowModel:a,disabled:i}),a.abilities.edit&&t.jsx(y,{rowModel:a,resource:e,disabled:i}),a.abilities.delete&&t.jsx(v,{id:a.id,resource:e,disabled:i})]})}}]})})]})}export{P as default};
