import{J as F,x as I,j as s}from"./app-BLZFXyKH.js";import{I as h}from"./input-error-BwRCYXjW.js";import{t as n,B as y}from"./useTranslation-DHlm1SLp.js";import{C as j}from"./checkbox-CwR3Yop-.js";import{I as L}from"./input-C0LnvjHX.js";import{L as o}from"./label-BFHDIXkk.js";import{L as $}from"./loader-circle-zSSyPNjN.js";import"./index-ylu4HxYp.js";import"./index-DPg7GP5P.js";import"./index-B30nyNOK.js";import"./index-DDUeDfIN.js";function q({resource:l}){var u;const{permissions:b,model:t}=F().props,{data:a,setData:c,post:f,put:N,reset:d,errors:p,processing:x}=I({name:(t==null?void 0:t.name)||"",permissions:((u=t==null?void 0:t.permissions)==null?void 0:u.map(e=>e.id))||[]}),g=e=>{c("permissions",a.permissions.includes(e)?a.permissions.filter(r=>r!==e):[...a.permissions,e])},v=(e,r)=>{const i=r.map(m=>m.id),k=i.every(m=>a.permissions.includes(m));c("permissions",k?a.permissions.filter(m=>!i.includes(m)):[...a.permissions,...i])},C=e=>{e.preventDefault(),t?N(route(l+".update",t.id),{onFinish:()=>d()}):f(route(l+".store"),{onFinish:()=>d()})};return s.jsxs("form",{method:"post",className:"space-y-6",onSubmit:C,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{htmlFor:"name",children:n("attributes.name")}),s.jsx(L,{id:"name",className:"mt-1 block w-full",value:a.name,onChange:e=>c("name",e.target.value),autoComplete:"name",placeholder:n("attributes.name")}),s.jsx(h,{className:"mt-2",message:p.name})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(o,{children:n("attributes.permissions")}),s.jsx(h,{className:"mt-2",message:p.permissions}),Object.entries(b).map(([e,r])=>s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(j,{id:`group-${e}`,name:"group-permissions",checked:r.every(i=>a.permissions.includes(i.id)),onClick:()=>v(e,r),tabIndex:3}),s.jsx(o,{htmlFor:`group-${e}`,className:"font-bold",children:e.toUpperCase()})]}),s.jsx("div",{className:"ml-4",children:r.map(i=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(j,{id:`permission-${i.id}`,name:"permissions",checked:a.permissions.includes(i.id),onClick:()=>g(i.id),tabIndex:3}),s.jsx(o,{htmlFor:`permission-${i.id}`,children:i.name})]},i.id))})]},e))]}),s.jsxs(y,{type:"submit",className:"mt-4",disabled:x,children:[x&&s.jsx($,{className:"h-4 w-4 animate-spin"}),n("attributes.save")]})]})}export{q as default};
