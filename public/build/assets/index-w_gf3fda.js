import{J as b,r as h,j as t,Q as x,S as n}from"./app-CKP0fCad.js";import{E as y}from"./EditAction-lIRaSem5.js";import{S as j,D as _}from"./table-BDovoNfT.js";import{M as v}from"./m-datatable-C1SWNBSB.js";import{t as e,B as c}from"./useTranslation-B1WnH85P.js";import{A as g}from"./app-layout-BpALnAhw.js";import{R as d}from"./refresh-cw-DSt3WsYr.js";import"./index-Pypb9-U_.js";import"./index--gZpnN_G.js";import"./index-CFY7JARr.js";import"./index-BGH1-Xth.js";import"./input-CoiDNOd_.js";import"./label-Dpait9sO.js";import"./chevron-down-DPUmf5jv.js";import"./app-logo-icon-D2cv5nBr.js";function P(){const{items:l}=b().props,r="company.ppp.profiles",[i,o]=h.useState(!1),m=[{title:e("attributes.dashboard"),href:route("company.dashboard")},{title:e(`attributes.${r}.title`),href:route(r+".index")}];function p(a){if(a)try{o(!0),n.visit(route(r+".sync",a),{method:"post",onFinish:()=>{o(!1)}})}catch(s){console.error(`Failed to sync ${r}:`,s),o(!1)}}function u(){try{o(!0),n.visit(route(r+".sync-all"),{method:"post",onFinish:()=>{o(!1)}})}catch(a){console.error(`Failed to sync ${r}:`,a),o(!1)}}return t.jsxs(g,{breadcrumbs:m,children:[t.jsx(x,{title:e(`attributes.${r}.title`)}),t.jsx("div",{className:"px-4 py-6",children:t.jsx(v,{items:l,createButton:!0,beforeCreateBtnContent:t.jsxs(c,{variant:"default",className:"px-8 py-5 text-[16px] font-extrabold",onClick:a=>{a.stopPropagation(),u()},disabled:i,children:[t.jsx(d,{size:20,className:""}),e("attributes.fetch_from_microtik")]}),resource:r,columns:[{accessorKey:"router.name",header:e("attributes.router")},{accessorKey:"name",header:e("attributes.name")},{accessorKey:"download_formatted",header:e("attributes.download_limit")},{accessorKey:"upload_formatted",header:e("attributes.upload_limit")},{accessorKey:"price_formatted",header:e("attributes.price")},{accessorKey:"created_at",header:e("attributes.created_at")},{id:"actions",header:e("attributes.actions"),cell:({row:a})=>{const s=a.original;return t.jsxs("div",{className:"flex",children:[s.abilities.need_sync&&t.jsx(c,{title:e("attributes.sync"),variant:"ghost",onClick:f=>{f.stopPropagation(),p(s.id)},disabled:i,children:t.jsx(d,{size:20,className:"text-green-500"})}),s.abilities.view&&t.jsx(j,{resource:r,rowModel:s,disabled:i}),s.abilities.edit&&t.jsx(y,{rowModel:s,resource:r,disabled:i}),s.abilities.delete&&t.jsx(_,{id:s.id,resource:r,disabled:i})]})}}]})})]})}export{P as default};
