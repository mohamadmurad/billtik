import{J as x,j as t,S as b}from"./app-B6QY1Og_.js";import{E as f}from"./EditAction-BSYM_raQ.js";import{S as y}from"./ShowAction-Cd9mkg9r.js";import{D as j}from"./DeletePopover-TumziBYL.js";import{M as g}from"./m-datatable-ChKdPGU7.js";import{M as v}from"./MSelect-kRgExxRo.js";import{B as _}from"./badge-Bn5vXtGL.js";import{t as s,c as C,B as F}from"./useTranslation-P8BaZsfy.js";import{u as w}from"./useDatatableFilters-BsDrvapD.js";import{R as K}from"./refresh-cw-Ba2FNFbl.js";function I({resource:a}){const{items:o}=x().props,{filters:i,setFilters:n,applyFilters:l,resetFilters:c,isFiltersActive:m}=w({search:"",router_id:""},a),d=i;function p(r){if(r)try{b.visit(route(a+".sync",r),{method:"post"})}catch(e){console.error(`Failed to sync ${a}:`,e)}}const u=t.jsx("div",{className:"min-w-[300px] space-y-4",children:t.jsx("div",{className:"grid gap-2",children:t.jsx(v,{label:s("attributes.router"),value:String(d.router_id),apiUrl:route("company.routers.search"),inputProps:{id:"router"},onChange:r=>n({...i,router_id:String(r)})})})});return t.jsx("div",{className:"px-4 py-6",children:t.jsx(g,{items:o,resource:a,columns:[{accessorKey:"router.name",header:s("attributes.router")},{accessorKey:"name",header:s("attributes.name")},{accessorKey:"status",header:s("attributes.status"),cell:({row:r})=>{const e=r.original;return t.jsx(_,{className:C("border-0 text-xs font-medium shadow-lg",e.status_meta.bgColor,e.status_meta.textColor),children:e.status_meta.label})}},{accessorKey:"mikrotik_username",header:s("attributes.username")},{accessorKey:"email",header:s("attributes.email")},{accessorKey:"phone",header:s("attributes.phone")},{accessorKey:"created_at",header:s("attributes.created_at")},{id:"actions",header:s("attributes.actions"),cell:({row:r})=>{const e=r.original;return t.jsxs("div",{className:"flex",children:[e.abilities.need_sync&&t.jsx(F,{title:s("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),p(e.id)},children:t.jsx(K,{size:20,className:"text-green-500"})}),e.abilities.view&&t.jsx(y,{resource:a,rowModel:e}),e.abilities.edit&&t.jsx(f,{rowModel:e,resource:a}),e.abilities.delete&&t.jsx(j,{id:e.id,resource:a})]})}}],filterComponents:u,filtersActive:m,onFilterApply:l,onFilterReset:c})})}export{I as C};
