import{J as $,x as z,j as s,Q as L}from"./app-B6QY1Og_.js";import{I as j}from"./input-error-BrHZ_F5U.js";import{t as d,B as F}from"./useTranslation-P8BaZsfy.js";import{C as l}from"./checkbox-BjeRQn6Q.js";import{L as n}from"./label-CIxcbhfQ.js";import{A as S}from"./app-layout-N9fXVk_P.js";import{L as A}from"./loader-circle-ab5Rz2m4.js";import"./index-D-GtT93Y.js";import"./index-9sgGMZAq.js";import"./index-w5y_lyW2.js";import"./index-BRtd1GjH.js";import"./check-CB7jbE2m.js";import"./index-DkxwP9Mb.js";import"./x-BXm9FZG6.js";import"./settings-Cs3M8s6-.js";import"./app-logo-icon-ok-wPz_R.js";function V(){var h,u;const o="users",{model:r,permissions:b,roles:f}=$().props,N=[{title:d("attributes.dashboard"),href:route("dashboard")},{title:d(`attributes.${o}.title`),href:route(o+".index")},{title:r.name,href:"#"}],{data:i,setData:c,put:g,errors:p,processing:x}=z({permissions:((h=r==null?void 0:r.permissions)==null?void 0:h.map(e=>e.id))||[],roles:((u=r==null?void 0:r.roles)==null?void 0:u.map(e=>e.id))||[]}),v=e=>{c("permissions",i.permissions.includes(e)?i.permissions.filter(a=>a!==e):[...i.permissions,e])},k=e=>{c("roles",i.roles.includes(e)?i.roles.filter(a=>a!==e):[...i.permissions,e])},C=(e,a)=>{const t=a.map(m=>m.id),y=t.every(m=>i.permissions.includes(m));c("permissions",y?i.permissions.filter(m=>!t.includes(m)):[...i.permissions,...t])},w=e=>{e.preventDefault(),g(route(o+".update-permissions",r.id),{})};return s.jsxs(S,{breadcrumbs:N,children:[s.jsx(L,{title:r.name}),s.jsxs("div",{className:"px-4 py-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:d("attributes.name")}),s.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:r.name})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:d("attributes.email")}),s.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:r.email})]})]}),s.jsxs("form",{method:"post",className:"space-y-6",onSubmit:w,children:[s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(n,{children:d("attributes.permissions")}),s.jsx(j,{className:"mt-2",message:p.permissions}),Object.entries(b).map(([e,a])=>s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(l,{id:`group-${e}`,name:"group-permissions",checked:a.every(t=>i.permissions.includes(t.id)),onClick:()=>C(e,a),tabIndex:3}),s.jsx(n,{htmlFor:`group-${e}`,className:"font-bold",children:e.toUpperCase()})]}),s.jsx("div",{className:"ml-4",children:a.map(t=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(l,{id:`permission-${t.id}`,name:"permissions",checked:i.permissions.includes(t.id),onClick:()=>v(t.id),tabIndex:3}),s.jsx(n,{htmlFor:`permission-${t.id}`,children:t.name})]},t.id))})]},e))]}),s.jsxs("div",{className:"",children:[s.jsx(n,{children:d("attributes.roles.title")}),s.jsx(j,{className:"mt-2",message:p.roles}),s.jsx("div",{className:"mt-3",children:f.map(e=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(l,{id:`roles-${e.id}`,name:"roles",checked:i.roles.includes(e.id),onClick:()=>k(e.id),tabIndex:3}),s.jsx(n,{htmlFor:`roles-${e.id}`,children:e.name})]},"role-"+e.id))})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsxs(F,{type:"submit",className:"w-auto",disabled:x,children:[x&&s.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),d("attributes.save")]})})]})]})]})}export{V as default};
