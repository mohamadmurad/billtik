import{J as ie,a as D,x as le,j as e,Q as de,S as $}from"./app-PzElV8YR.js";import{S as ce}from"./SubscriptionsTable-DIodS451.js";import{M as ne}from"./MSelect-BfDTeLIG.js";import{T as oe,A as me,a as xe,b as he,S as L,c as I,d as P,e as F}from"./app-layout-C1bh3LsM.js";import{B as U}from"./badge-BzNPrz4x.js";import{c,t as i,a as v,B as d}from"./useTranslation-Cm8lgSnx.js";import{C as n,a as o,b as m,d as x}from"./card-uLeuiPLG.js";import{I as B}from"./input-CMZLONab.js";import{S as pe}from"./separator-CXohCJsO.js";import{C as h,A as R,a as y,b as H,E as ge,S as Q,c as be,T as ue,d as je}from"./triangle-alert-DdxNmNV8.js";import{S as w,R as V}from"./settings-CoLgkBOl.js";import{E as Ne}from"./DeletePopover-CYoEGPjH.js";import{L as fe}from"./loader-circle-OX21fb4K.js";import"./EditAction-B50qakKv.js";import"./m-datatable-DD7XYvHD.js";import"./popover-BBKlb84_.js";import"./index-BLYwJ1pc.js";import"./index-7_1EPdya.js";import"./index-CocCzd2S.js";import"./index-Fk-E4_Lj.js";import"./x-Ch31af-f.js";import"./chevron-down-DjW5B2YW.js";import"./label-D2jW6Imn.js";import"./select-DtJiDXrW.js";import"./index-DFKWOvFi.js";import"./app-logo-icon-B4A5scxx.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],X=c("CreditCard",ve);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],we=c("Ellipsis",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ce=c("EyeOff",ke);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Se=c("Mail",_e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],ze=c("Phone",Me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q=c("Plus",Ae);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Ee=c("ShieldAlert",Te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],O=c("ShieldX",De);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],J=c("User",$e);function ns(){var M,z,A,T,E;const p="company.ppp.clients",{model:s}=ie().props,[b,G]=D.useState(!1),[k,C]=D.useState(null),K=[{title:i("attributes.dashboard"),href:route("company.dashboard")},{title:i(`attributes.${p}.title`),href:route(p+".index")},{title:s.name??"",href:"#"}],{data:u,setData:j,post:W,processing:_,reset:Y,errors:N}=le({profile_id:"",start_date:"",end_date:""}),Z=t=>{t.preventDefault(),W(route(p+".subscriptions.store",s.id),{onSuccess:()=>Y()})},ee=()=>$.post(route("company.ppp.clients.enable",s.id)),se=()=>$.post(route("company.ppp.clients.disable",s.id)),g=(t=>{const r={active:{label:"Active",variant:"default",icon:L,bgColor:"bg-green-50 dark:bg-green-950/20",borderColor:"border-green-200 dark:border-green-800",textColor:"text-green-700 dark:text-green-300"},disabled:{label:"Disabled",variant:"secondary",icon:O,bgColor:"bg-red-50 dark:bg-red-950/20",borderColor:"border-red-200 dark:border-red-800",textColor:"text-red-700 dark:text-red-300"},suspended:{label:"Suspended",variant:"destructive",icon:Ee,bgColor:"bg-yellow-50 dark:bg-yellow-950/20",borderColor:"border-yellow-200 dark:border-yellow-800",textColor:"text-yellow-700 dark:text-yellow-300"},pending:{label:"Pending",variant:"outline",icon:je,bgColor:"bg-blue-50 dark:bg-blue-950/20",borderColor:"border-blue-200 dark:border-blue-800",textColor:"text-blue-700 dark:text-blue-300"}};return r[t]||r.disabled})(s.status||"disabled"),ae=g.icon,S=async(t,r)=>{try{await navigator.clipboard.writeText(t),C(r),setTimeout(()=>C(null),2e3)}catch(l){console.error("Failed to copy: ",l)}},te=t=>t.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2),a=(()=>{if(!s.active_subscription)return null;const t=new Date(s.active_subscription.end_date),r=new Date,l=Math.ceil((t.getTime()-r.getTime())/(1e3*60*60*24));return l<0?{status:"expired",days:Math.abs(l)}:l<=7?{status:"expiring",days:l}:{status:"active",days:l}})();return e.jsx(oe,{children:e.jsxs(me,{breadcrumbs:K,children:[e.jsx(de,{title:s.name??""}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:e.jsxs("div",{className:"space-y-8 p-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"relative flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(xe,{className:"h-20 w-20 border-4 border-white/20 shadow-xl",children:e.jsx(he,{className:"bg-white/10 text-xl font-bold backdrop-blur-sm",children:te(s.name||"UN")})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.name}),e.jsxs(U,{className:v("border-0 text-sm font-medium shadow-lg",g.bgColor,g.textColor),children:[e.jsx(ae,{className:"mr-1 h-4 w-4"}),g.label]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/80",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"h-4 w-4"}),"ID: ",s.id]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-4 w-4"}),"Created: ",new Date(s.created_at).toLocaleDateString()]}),a&&e.jsxs("span",{className:v("flex items-center gap-1 rounded-full px-3 py-1",a.status==="expired"?"bg-red-500/20 text-red-100":a.status==="expiring"?"bg-yellow-500/20 text-yellow-100":"bg-green-500/20 text-green-100"),children:[e.jsx(R,{className:"h-3 w-3"}),a.status==="expired"?`Expired ${a.days} days ago`:a.status==="expiring"?`Expires in ${a.days} days`:`${a.days} days remaining`]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[((M=s.abilities)==null?void 0:M.can_enable)&&e.jsxs(d,{onClick:ee,size:"lg",className:"border-white/20 bg-white/10 text-white backdrop-blur-sm hover:bg-white/20",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Enable Client"]}),((z=s.abilities)==null?void 0:z.can_disable)&&e.jsxs(d,{onClick:se,size:"lg",variant:"destructive",className:"border-red-400/30 bg-red-500/20 text-white backdrop-blur-sm hover:bg-red-500/30",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Disable Client"]}),e.jsxs(d,{size:"lg",className:"border-white/20 bg-white/10 text-white backdrop-blur-sm hover:bg-white/20",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Settings"]})]})]})]}),e.jsxs("div",{className:"grid gap-8 xl:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6 xl:col-span-2",children:[e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-blue-100 p-2 dark:bg-blue-900/30",children:e.jsx(J,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{children:"Client Information"})]}),e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(we,{className:"h-4 w-4"})})]})}),e.jsx(x,{className:"space-y-6",children:e.jsx("div",{className:"grid gap-6 sm:grid-cols-2",children:[{icon:Se,label:i("attributes.email"),value:s.email,copyable:!0},{icon:ze,label:i("attributes.phone"),value:s.phone,copyable:!0},{icon:X,label:i("attributes.id_number"),value:s.id_number,copyable:!0},{icon:h,label:i("attributes.created_at"),value:new Date(s.created_at).toLocaleDateString()}].map(({icon:t,label:r,value:l,copyable:f},re)=>e.jsxs("div",{className:"group space-y-3",children:[e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-sm font-medium",children:[e.jsx(t,{className:"h-4 w-4"}),r]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-foreground flex-1 font-semibold",children:l}),f&&e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",className:"opacity-0 transition-opacity group-hover:opacity-100",onClick:()=>S(l,r),children:k===r?e.jsx(y,{className:"h-4 w-4 text-green-500"}):e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(F,{children:["Copy ",r]})]})]})]},re))})})]}),e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-purple-100 p-2 dark:bg-purple-900/30",children:e.jsx(V,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{children:"Technical Configuration"})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>G(!b),children:b?e.jsx(Ce,{className:"h-4 w-4"}):e.jsx(Ne,{className:"h-4 w-4"})})]})}),e.jsx(x,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-muted/50 flex items-center justify-between rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"text-muted-foreground h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:i("attributes.router")}),e.jsx("p",{className:"font-semibold",children:s.router.name})]})]}),e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(ge,{className:"h-4 w-4"})})]}),e.jsx(pe,{className:"my-4"}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:[{label:i("attributes.mikrotik_username"),value:s.mikrotik_username},{label:i("attributes.mikrotik_password"),value:s.mikrotik_password}].map(({label:t,value:r},l)=>e.jsxs("div",{className:"group space-y-2",children:[e.jsx("div",{className:"text-muted-foreground text-sm font-medium",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-muted/50 flex-1 rounded-md p-3 font-mono text-sm",children:b?r:"••••••••"}),e.jsxs(I,{children:[e.jsx(P,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",className:"opacity-0 transition-opacity group-hover:opacity-100",onClick:()=>S(r,t),children:k===t?e.jsx(y,{className:"h-4 w-4 text-green-500"}):e.jsx(H,{className:"h-4 w-4"})})}),e.jsxs(F,{children:["Copy ",t]})]})]})]},l))})]})})]}),e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-green-100 p-2 dark:bg-green-900/30",children:e.jsx(h,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{children:"Subscriptions History"})]}),e.jsxs(U,{variant:"secondary",className:"bg-muted/50",children:[((A=s.subscriptions)==null?void 0:A.length)??0," total"]})]})}),e.jsx(x,{className:"p-0",children:e.jsx("div",{className:"overflow-hidden rounded-lg",children:e.jsx(ce,{type:"ppp",resource:p,items:{data:s.subscriptions,total:((T=s.subscriptions)==null?void 0:T.length)??0,links:[],current_page:1,from:1,to:1}})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-indigo-100 p-2 dark:bg-indigo-900/30",children:e.jsx(Q,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"})}),e.jsx("span",{children:"Current Subscription"})]})}),e.jsx(x,{children:s.active_subscription?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:v("inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium",(a==null?void 0:a.status)==="expired"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":(a==null?void 0:a.status)==="expiring"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300"),children:[(a==null?void 0:a.status)==="expired"?e.jsx(be,{className:"h-4 w-4"}):(a==null?void 0:a.status)==="expiring"?e.jsx(ue,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"}),(a==null?void 0:a.status)==="expired"?"Expired":(a==null?void 0:a.status)==="expiring"?"Expiring Soon":"Active"]})}),e.jsx("div",{className:"space-y-3",children:[{icon:J,label:i("attributes.profile"),value:(E=s.active_subscription.profile)==null?void 0:E.name},{icon:h,label:i("attributes.start_date"),value:s.active_subscription.start_date},{icon:h,label:i("attributes.end_date"),value:s.active_subscription.end_date}].map(({icon:t,label:r,value:l},f)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2 text-xs font-medium",children:[e.jsx(t,{className:"h-3 w-3"}),r]}),e.jsx("p",{className:"pl-5 text-sm font-semibold",children:l})]},f))})]}):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(Q,{className:"text-muted-foreground/50 mx-auto mb-4 h-12 w-12"}),e.jsx("p",{className:"text-muted-foreground",children:"No active subscription"}),e.jsx("p",{className:"text-muted-foreground/70 mt-1 text-sm",children:"Create a new subscription below"})]})})]}),e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-orange-100 p-2 dark:bg-orange-900/30",children:e.jsx(w,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"})}),e.jsx("span",{children:"Quick Actions"})]})}),e.jsxs(x,{className:"space-y-3",children:[e.jsxs(d,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"View Usage Statistics"]}),e.jsxs(d,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Schedule Maintenance"]}),e.jsxs(d,{variant:"outline",className:"w-full justify-start",size:"sm",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Advanced Settings"]})]})]}),e.jsxs(n,{className:"border-0 bg-gradient-to-br from-white via-slate-50/50 to-white shadow-xl dark:from-slate-800 dark:via-slate-800/50 dark:to-slate-800",children:[e.jsx(o,{className:"pb-4",children:e.jsxs(m,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-emerald-100 p-2 dark:bg-emerald-900/30",children:e.jsx(q,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{children:"Add New Subscription"})]})}),e.jsx(x,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ne,{label:i("attributes.profile"),value:String(u.profile_id),apiUrl:route("company.ppp.profiles.search",{is_synced:1}),inputProps:{id:"profile"},onChange:t=>j("profile_id",String(t)),error:N.profile_id,dependencies:{router_id:s.router_id}}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(B,{label:i("attributes.start_date"),id:"start_date",type:"date",value:u.start_date,onChange:t=>j("start_date",t.target.value),error:N.start_date}),e.jsx(B,{label:i("attributes.end_date"),id:"end_date",type:"date",value:u.end_date,onChange:t=>j("end_date",t.target.value),error:N.end_date})]})]}),e.jsx(d,{type:"submit",className:"w-full",disabled:_,size:"lg",children:_?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Subscription..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),i("attributes.save")]})})]})})]})]})]})]})})]})})}export{ns as default};
