import{J as u,a as x,j as e,S as n}from"./app-j98xFq4G.js";import{E as b}from"./EditAction-DXB-ECyw.js";import{S as h,D as y}from"./table-D4lzPPau.js";import{M as j}from"./m-datatable-DrjMZHNg.js";import{t as a,B as l}from"./useTranslation-Bzpf8O67.js";import{R as d}from"./refresh-cw-C0linfKw.js";function N({resource:s}){const{items:c}=u().props,[r,o]=x.useState(!1);function m(i){if(i)try{o(!0),n.visit(route(s+".sync",i),{method:"post",onFinish:()=>o(!1)})}catch(t){console.error(`Failed to sync ${s}:`,t),o(!1)}}function p(){try{o(!0),n.visit(route(s+".sync-all"),{method:"post",onFinish:()=>o(!1)})}catch(i){console.error(`Failed to sync ${s}:`,i),o(!1)}}return e.jsx("div",{className:"px-4 py-6",children:e.jsx(j,{items:c,createButton:!0,beforeCreateBtnContent:e.jsxs(l,{variant:"default",className:"px-8 py-5 text-[16px] font-extrabold",onClick:i=>{i.stopPropagation(),p()},disabled:r,children:[e.jsx(d,{size:20,className:""}),a("attributes.fetch_from_microtik")]}),resource:s,columns:[{accessorKey:"router.name",header:a("attributes.router")},{accessorKey:"name",header:a("attributes.name")},{accessorKey:"download_formatted",header:a("attributes.download_limit")},{accessorKey:"upload_formatted",header:a("attributes.upload_limit")},{accessorKey:"price_formatted",header:a("attributes.price")},{accessorKey:"created_at",header:a("attributes.created_at")},{id:"actions",header:a("attributes.actions"),cell:({row:i})=>{const t=i.original;return e.jsxs("div",{className:"flex",children:[t.abilities.need_sync&&e.jsx(l,{title:a("attributes.sync"),variant:"ghost",onClick:f=>{f.stopPropagation(),m(t.id)},disabled:r,children:e.jsx(d,{size:20,className:"text-green-500"})}),t.abilities.view&&e.jsx(h,{resource:s,rowModel:t,disabled:r}),t.abilities.edit&&e.jsx(b,{rowModel:t,resource:s,disabled:r}),t.abilities.delete&&e.jsx(y,{id:t.id,resource:s,disabled:r})]})}}]})})}export{N as P};
