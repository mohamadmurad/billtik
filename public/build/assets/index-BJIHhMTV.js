import{J as f,a as b,j as t,Q as x,S as c}from"./app-CsO5Qu4o.js";import{E as y}from"./EditAction-DV0yS5pp.js";import{S as j,D as v}from"./table-H862cKOm.js";import{M as _}from"./m-datatable-BCGzJb1c.js";import{a as g,t as e,B as n}from"./useTranslation-CKbIDshE.js";import{A as k}from"./app-layout-DB3Zm63_.js";import"./index-BXQsaqdr.js";import"./index-DQK-Nuwd.js";import"./index-CxxjmM5e.js";import"./input-BY9u44IU.js";import"./label-CgHfY_sk.js";import"./chevron-down-Ce0tqATG.js";import"./app-logo-icon-BmAKhIMq.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],d=g("RefreshCw",w);function P(){const{items:l}=f().props,s="profiles",[i,o]=b.useState(!1),m=[{title:e("attributes.dashboard"),href:route("dashboard")},{title:e(`attributes.${s}.title`),href:route(s+".index")}];function p(r){if(r)try{o(!0),c.visit(route(s+".sync",r),{method:"post",onFinish:()=>{o(!1)}})}catch(a){console.error(`Failed to sync ${s}:`,a),o(!1)}}function u(){try{o(!0),c.visit(route(s+".sync-all"),{method:"post",onFinish:()=>{o(!1)}})}catch(r){console.error(`Failed to sync ${s}:`,r),o(!1)}}return t.jsxs(k,{breadcrumbs:m,children:[t.jsx(x,{title:e(`attributes.${s}.title`)}),t.jsx("div",{className:"px-4 py-6",children:t.jsx(_,{items:l,createButton:!0,beforeCreateBtnContent:t.jsxs(n,{variant:"default",className:"px-8 py-5 text-[16px] font-extrabold",onClick:r=>{r.stopPropagation(),u()},disabled:i,children:[t.jsx(d,{size:20,className:""}),e("attributes.fetch_from_microtik")]}),resource:s,columns:[{accessorKey:"router.name",header:e("attributes.router")},{accessorKey:"local_name",header:e("attributes.name")},{accessorKey:"download_formatted",header:e("attributes.download_limit")},{accessorKey:"upload_formatted",header:e("attributes.upload_limit")},{accessorKey:"price_formatted",header:e("attributes.price")},{accessorKey:"created_at",header:e("attributes.created_at")},{id:"actions",header:e("attributes.actions"),cell:({row:r})=>{const a=r.original;return t.jsxs("div",{className:"flex",children:[a.abilities.need_sync&&t.jsx(n,{title:e("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),p(a.id)},disabled:i,children:t.jsx(d,{size:20,className:"text-green-500"})}),a.abilities.view&&t.jsx(j,{resource:s,rowModel:a,disabled:i}),a.abilities.edit&&t.jsx(y,{rowModel:a,resource:s,disabled:i}),a.abilities.delete&&t.jsx(v,{id:a.id,resource:s,disabled:i})]})}}]})})]})}export{P as default};
