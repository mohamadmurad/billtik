import{J as F,x as I,j as s}from"./app-D241pbsn.js";import{L as m,I as h}from"./label-CicWX6bg.js";import{t as o,B as y}from"./useTranslation-Bo7JzlfX.js";import{C as j}from"./checkbox-DtsVmScS.js";import{I as L}from"./input-9YJXp9Bg.js";import{L as $}from"./loader-circle-rUW_XYRE.js";import"./index-Cy3cIEXx.js";import"./index-DH8udSfP.js";import"./index-cHgWJF6C.js";function R({resource:l}){var u;const{permissions:b,model:t}=F().props,{data:a,setData:c,post:f,put:N,reset:d,errors:p,processing:x}=I({name:(t==null?void 0:t.name)||"",permissions:((u=t==null?void 0:t.permissions)==null?void 0:u.map(e=>e.id))||[]}),g=e=>{c("permissions",a.permissions.includes(e)?a.permissions.filter(n=>n!==e):[...a.permissions,e])},v=(e,n)=>{const i=n.map(r=>r.id),k=i.every(r=>a.permissions.includes(r));c("permissions",k?a.permissions.filter(r=>!i.includes(r)):[...a.permissions,...i])},C=e=>{e.preventDefault(),t?N(route(l+".update",t.id),{onFinish:()=>d()}):f(route(l+".store"),{onFinish:()=>d()})};return s.jsxs("form",{method:"post",className:"space-y-6",onSubmit:C,children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{htmlFor:"name",children:o("attributes.name")}),s.jsx(L,{id:"name",className:"mt-1 block w-full",value:a.name,onChange:e=>c("name",e.target.value),autoComplete:"name",placeholder:o("attributes.name")}),s.jsx(h,{className:"mt-2",message:p.name})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{children:o("attributes.permissions")}),s.jsx(h,{className:"mt-2",message:p.permissions}),Object.entries(b).map(([e,n])=>s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(j,{id:`group-${e}`,name:"group-permissions",checked:n.every(i=>a.permissions.includes(i.id)),onClick:()=>v(e,n),tabIndex:3}),s.jsx(m,{htmlFor:`group-${e}`,className:"font-bold",children:e.toUpperCase()})]}),s.jsx("div",{className:"ml-4",children:n.map(i=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(j,{id:`permission-${i.id}`,name:"permissions",checked:a.permissions.includes(i.id),onClick:()=>g(i.id),tabIndex:3}),s.jsx(m,{htmlFor:`permission-${i.id}`,children:i.name})]},i.id))})]},e))]}),s.jsxs(y,{type:"submit",className:"mt-4",disabled:x,children:[x&&s.jsx($,{className:"h-4 w-4 animate-spin"}),o("attributes.save")]})]})}export{R as default};
