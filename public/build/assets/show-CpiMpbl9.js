import{J as $,x as z,j as s,Q as L}from"./app-DxoL1O7-.js";import{L as m,I as j}from"./label-CT7m3UTX.js";import{t as d,B as F}from"./useTranslation-C-rHim9i.js";import{C as o}from"./checkbox-BOEk7-Hs.js";import{A as S}from"./app-layout-CgjTkDn-.js";import{L as A}from"./loader-circle-Bm2rKU0X.js";import"./index-xuhrCoLe.js";import"./index-CrvVuTR-.js";import"./index-twfHjvdI.js";import"./index-8kq6GhE5.js";import"./app-logo-icon-D_8UZM-k.js";function q(){var h,u;const c="users",{model:a,permissions:b,roles:f}=$().props,N=[{title:d("attributes.dashboard"),href:route("dashboard")},{title:d(`attributes.${c}.title`),href:route(c+".index")},{title:a.name,href:"#"}],{data:i,setData:l,put:g,errors:x,processing:p}=z({permissions:((h=a==null?void 0:a.permissions)==null?void 0:h.map(e=>e.id))||[],roles:((u=a==null?void 0:a.roles)==null?void 0:u.map(e=>e.id))||[]}),v=e=>{l("permissions",i.permissions.includes(e)?i.permissions.filter(r=>r!==e):[...i.permissions,e])},k=e=>{l("roles",i.roles.includes(e)?i.roles.filter(r=>r!==e):[...i.permissions,e])},C=(e,r)=>{const t=r.map(n=>n.id),y=t.every(n=>i.permissions.includes(n));l("permissions",y?i.permissions.filter(n=>!t.includes(n)):[...i.permissions,...t])},w=e=>{e.preventDefault(),g(route(c+".update-permissions",a.id),{})};return s.jsxs(S,{breadcrumbs:N,children:[s.jsx(L,{title:a.name}),s.jsxs("div",{className:"px-4 py-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:d("attributes.name")}),s.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:a.name})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("h5",{className:"text-muted-foreground text-sm font-medium dark:text-zinc-300",children:d("attributes.email")}),s.jsx("p",{className:"text-base font-semibold text-zinc-900 dark:text-white",children:a.email})]})]}),s.jsxs("form",{method:"post",className:"space-y-6",onSubmit:w,children:[s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-6 rounded-2xl bg-white p-4 shadow-sm md:grid-cols-2 dark:bg-zinc-900",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(m,{children:d("attributes.permissions")}),s.jsx(j,{className:"mt-2",message:x.permissions}),Object.entries(b).map(([e,r])=>s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(o,{id:`group-${e}`,name:"group-permissions",checked:r.every(t=>i.permissions.includes(t.id)),onClick:()=>C(e,r),tabIndex:3}),s.jsx(m,{htmlFor:`group-${e}`,className:"font-bold",children:e.toUpperCase()})]}),s.jsx("div",{className:"ml-4",children:r.map(t=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(o,{id:`permission-${t.id}`,name:"permissions",checked:i.permissions.includes(t.id),onClick:()=>v(t.id),tabIndex:3}),s.jsx(m,{htmlFor:`permission-${t.id}`,children:t.name})]},t.id))})]},e))]}),s.jsxs("div",{className:"",children:[s.jsx(m,{children:d("attributes.roles.title")}),s.jsx(j,{className:"mt-2",message:x.roles}),s.jsx("div",{className:"mt-3",children:f.map(e=>s.jsxs("div",{className:"mb-2 flex items-center space-x-3",children:[s.jsx(o,{id:`roles-${e.id}`,name:"roles",checked:i.roles.includes(e.id),onClick:()=>k(e.id),tabIndex:3}),s.jsx(m,{htmlFor:`roles-${e.id}`,children:e.name})]},"role-"+e.id))})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsxs(F,{type:"submit",className:"w-auto",disabled:p,children:[p&&s.jsx(A,{className:"mr-2 h-4 w-4 animate-spin"}),d("attributes.save")]})})]})]})]})}export{q as default};
