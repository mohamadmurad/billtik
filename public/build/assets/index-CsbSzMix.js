import{a as h,S as b,J as f,j as s,Q as x}from"./app-CsO5Qu4o.js";import{E as j}from"./EditAction-DV0yS5pp.js";import{S as y,D as S}from"./table-H862cKOm.js";import{M as v}from"./m-datatable-BCGzJb1c.js";import{M as F}from"./MSelect-BfYYupLe.js";import{t as i}from"./useTranslation-CKbIDshE.js";import{A as g}from"./app-layout-DB3Zm63_.js";import"./index-BXQsaqdr.js";import"./index-DQK-Nuwd.js";import"./index-CxxjmM5e.js";import"./input-BY9u44IU.js";import"./label-CgHfY_sk.js";import"./chevron-down-Ce0tqATG.js";import"./index-B8mR64yK.js";import"./app-logo-icon-BmAKhIMq.js";function w(o={},t){const[c,n]=h.useState(o),[l,d]=h.useState(!0);h.useEffect(()=>{if(l){const r=new URLSearchParams(window.location.search),e={};Object.keys(o).forEach(a=>{r.has(a)&&(e[a]=r.get(a))}),n(a=>({...a,...e})),d(!1)}},[l,o]);const m=()=>{const r=Object.fromEntries(Object.entries(c).filter(([e,a])=>a!==""&&a!==void 0));b.get(route(t+".index",r),{preserveState:!0,replace:!0,only:["items"],onFinish:()=>{window.history.replaceState({},"",route(t+".index",r))}})},u=()=>{n(o),b.get(route(t+".index"),{preserveState:!0,replace:!0,only:["items"]})},p=Object.entries(c).some(([r,e])=>e!==void 0&&e!==""&&e!==o[r]);return{filters:c,setFilters:n,applyFilters:m,resetFilters:u,isFiltersActive:p}}function $(){const{items:o}=f().props,t="clients",{filters:c,setFilters:n,applyFilters:l,resetFilters:d,isFiltersActive:m}=w({search:"",router_id:""},t),u=s.jsx("div",{className:"min-w-[300px] space-y-4",children:s.jsx("div",{className:"grid gap-2",children:s.jsx(F,{label:i("attributes.router"),value:String(c.router_id),apiUrl:route("routers.search"),id:"router",onChange:r=>n({...c,router_id:String(r)})})})}),p=[{title:i("attributes.dashboard"),href:route("dashboard")},{title:i(`attributes.${t}.title`),href:route(t+".index")}];return s.jsxs(g,{breadcrumbs:p,children:[s.jsx(x,{title:i(`attributes.${t}.title`)}),s.jsx("div",{className:"px-4 py-6",children:s.jsx(v,{items:o,resource:t,columns:[{accessorKey:"router.name",header:i("attributes.router")},{accessorKey:"name",header:i("attributes.name")},{accessorKey:"mikrotik_username",header:i("attributes.username")},{accessorKey:"email",header:i("attributes.email")},{accessorKey:"phone",header:i("attributes.phone")},{accessorKey:"created_at",header:i("attributes.created_at")},{id:"actions",header:i("attributes.actions"),cell:({row:r})=>{const e=r.original;return s.jsxs("div",{className:"flex",children:[e.abilities.view&&s.jsx(y,{resource:t,rowModel:e}),e.abilities.edit&&s.jsx(j,{rowModel:e,resource:t}),e.abilities.delete&&s.jsx(S,{id:e.id,resource:t})]})}}],filterComponents:u,filtersActive:m,onFilterApply:l,onFilterReset:d})})]})}export{$ as default};
