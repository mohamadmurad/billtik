import{J as x,j as e,S as y}from"./app-PzElV8YR.js";import{E as b}from"./EditAction-B50qakKv.js";import{S as f,D as j}from"./DeletePopover-CYoEGPjH.js";import{M as v}from"./m-datatable-DD7XYvHD.js";import{M as g}from"./MSelect-BfDTeLIG.js";import{u as F}from"./useDatatableFilters-CEVWtnnT.js";import{t as s,B as C}from"./useTranslation-Cm8lgSnx.js";import{R as S}from"./refresh-cw-Dzi_Ri0W.js";function k({resource:r}){const{items:o}=x().props,{filters:a,setFilters:n,applyFilters:l,resetFilters:c,isFiltersActive:m}=F({search:"",router_id:""},r),d=a;function p(i){if(i)try{y.visit(route(r+".sync",i),{method:"post"})}catch(t){console.error(`Failed to sync ${r}:`,t)}}const u=e.jsx("div",{className:"min-w-[300px] space-y-4",children:e.jsx("div",{className:"grid gap-2",children:e.jsx(g,{label:s("attributes.router"),value:String(d.router_id),apiUrl:route("company.routers.search"),inputProps:{id:"router"},onChange:i=>n({...a,router_id:String(i)})})})});return e.jsx("div",{className:"px-4 py-6",children:e.jsx(v,{items:o,resource:r,columns:[{accessorKey:"router.name",header:s("attributes.router")},{accessorKey:"name",header:s("attributes.name")},{accessorKey:"mikrotik_username",header:s("attributes.username")},{accessorKey:"email",header:s("attributes.email")},{accessorKey:"phone",header:s("attributes.phone")},{accessorKey:"created_at",header:s("attributes.created_at")},{id:"actions",header:s("attributes.actions"),cell:({row:i})=>{const t=i.original;return e.jsxs("div",{className:"flex",children:[t.abilities.need_sync&&e.jsx(C,{title:s("attributes.sync"),variant:"ghost",onClick:h=>{h.stopPropagation(),p(t.id)},children:e.jsx(S,{size:20,className:"text-green-500"})}),t.abilities.view&&e.jsx(f,{resource:r,rowModel:t}),t.abilities.edit&&e.jsx(b,{rowModel:t,resource:r}),t.abilities.delete&&e.jsx(j,{id:t.id,resource:r})]})}}],filterComponents:u,filtersActive:m,onFilterApply:l,onFilterReset:c})})}export{k as C};
