import{J as p,a as g,j as a,S as c}from"./app-BByt-vRR.js";import{E as h}from"./EditAction-C3qNY6ge.js";import{S as y}from"./ShowAction-D0pgH1mU.js";import{M as v}from"./m-datatable-BzfPuPBc.js";import{T as _}from"./ToggleActive-Dqp4YV3s.js";import{B as j}from"./badge-B_Ndj3e0.js";import{t as e,a as w,B as l}from"./useTranslation-bnkdia7D.js";import{R as d}from"./refresh-cw-CZG7eDmk.js";function F({resource:i}){const{items:m}=p().props,[o,r]=g.useState(!1);function b(s){if(s)try{r(!0),c.visit(route(i+".sync",s),{method:"post",onFinish:()=>r(!1)})}catch(t){console.error(`Failed to sync ${i}:`,t),r(!1)}}function x(){try{r(!0),c.visit(route(i+".sync-all"),{method:"post",onFinish:()=>r(!1)})}catch(s){console.error(`Failed to sync ${i}:`,s),r(!1)}}return a.jsx("div",{className:"px-4 py-6",children:a.jsx(v,{items:m,createButton:!0,beforeCreateBtnContent:a.jsxs(l,{variant:"default",className:"px-8 py-5 text-[16px] font-extrabold",onClick:s=>{s.stopPropagation(),x()},disabled:o,children:[a.jsx(d,{size:20,className:""}),e("attributes.fetch_from_microtik")]}),resource:i,columns:[{accessorKey:"router.name",header:e("attributes.router")},{accessorKey:"name",header:e("attributes.name")},{accessorKey:"is_active",header:e("attributes.status"),cell:({row:s})=>{const t=s.original,n=t.is_active?"bg-green-50 dark:bg-green-950/20":"bg-gray-50 dark:bg-gray-950/20",f=t.is_active?"text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300",u=t.is_active?e("attributes.active"):e("attributes.disabled");return a.jsx(j,{className:w("border-0 text-xs font-medium shadow-lg",n,f),children:u})}},{accessorKey:"download_formatted",header:e("attributes.download_limit")},{accessorKey:"upload_formatted",header:e("attributes.upload_limit")},{accessorKey:"price_formatted",header:e("attributes.price")},{accessorKey:"created_at",header:e("attributes.created_at")},{id:"actions",header:e("attributes.actions"),cell:({row:s})=>{const t=s.original;return a.jsxs("div",{className:"flex",children:[t.abilities.need_sync&&a.jsx(l,{title:e("attributes.sync"),variant:"ghost",onClick:n=>{n.stopPropagation(),b(t.id)},disabled:o,children:a.jsx(d,{size:20,className:"text-green-500"})}),t.abilities.view&&a.jsx(y,{resource:i,rowModel:t,disabled:o}),t.abilities.edit&&a.jsx(h,{rowModel:t,resource:i,disabled:o}),t.abilities.toggleActive&&a.jsx(_,{id:t.id,is_active:t.is_active,resource:i,disabled:o})]})}}]})})}export{F as P};
